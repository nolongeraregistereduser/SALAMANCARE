<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .test-panel {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .button-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        button {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .water { background: #2196F3; color: white; }
        .bathroom { background: #9C27B0; color: white; }
        .pain { background: #F44336; color: white; }
        .position { background: #FF9800; color: white; }
        .urgent { background: #D32F2F; color: white; animation: pulse 1s infinite; }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .info {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 13px;
            color: #1565C0;
        }
        
        .instructions {
            background: #FFF3E0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #E65100;
        }
    </style>
</head>
<body>
    <div class="test-panel">
        <h1>üîî Notification System Test</h1>
        
        <div class="instructions">
            <strong>üìã Instructions:</strong><br>
            1. Open your caregiver dashboard (index.html) in another tab<br>
            2. Click the buttons below to simulate patient alerts<br>
            3. Watch notifications appear in the dashboard!<br>
            4. Check the notification bell icon for the badge count
        </div>
        
        <h3>Simulate Patient Alerts:</h3>
        <div class="button-group">
            <button class="water" onclick="sendAlert('water')">
                üíß Water Request
            </button>
            <button class="bathroom" onclick="sendAlert('bathroom')">
                üöΩ Bathroom Assistance
            </button>
            <button class="pain" onclick="sendAlert('pain')">
                üíä Pain Alert
            </button>
            <button class="position" onclick="sendAlert('position')">
                üîÑ Position Adjustment
            </button>
            <button class="urgent" onclick="sendAlert('urgent')">
                üÜò URGENT ALERT
            </button>
        </div>
        
        <div class="info">
            <strong>‚ÑπÔ∏è How it works:</strong><br>
            ‚Ä¢ Push notification appears for 5-6 seconds at the top<br>
            ‚Ä¢ Urgent alerts shake and stay for 6 seconds<br>
            ‚Ä¢ Red badge appears on notification bell icon<br>
            ‚Ä¢ Click bell to see all notifications<br>
            ‚Ä¢ Mark as read or clear all from the panel
        </div>
    </div>

    <script>
        function sendAlert(type) {
            const alertConfig = {
                water: { emoji: 'üíß', label: 'Water Request' },
                bathroom: { emoji: 'üöΩ', label: 'Bathroom Assistance' },
                pain: { emoji: 'üíä', label: 'Pain Alert' },
                position: { emoji: 'üîÑ', label: 'Position Adjustment' },
                urgent: { emoji: 'üÜò', label: 'URGENT ALERT' }
            };
            
            const config = alertConfig[type];
            
            // Create alert object
            const alert = {
                id: Date.now().toString(),
                type: type,
                message: config.label,
                patientName: 'Test Patient',
                timestamp: Date.now()
            };
            
            // Try to send to main window if dashboard is open
            const dashboardWindow = window.opener || window.parent;
            
            if (dashboardWindow && typeof dashboardWindow.addNotification === 'function') {
                dashboardWindow.addNotification(alert);
                console.log('‚úÖ Alert sent to dashboard:', alert);
                alert('‚úÖ ' + config.emoji + ' Alert sent to dashboard!');
            } else {
                console.log('‚ö†Ô∏è Dashboard not detected');
                alert('‚ö†Ô∏è Please open index.html first, then open this test page from there');
            }
        }
        
        // Check if dashboard is accessible
        window.addEventListener('load', () => {
            setTimeout(() => {
                const dashboardWindow = window.opener || window.parent;
                if (!dashboardWindow || typeof dashboardWindow.addNotification !== 'function') {
                    const info = document.querySelector('.instructions');
                    info.innerHTML += '<br><br><strong style="color: red;">‚ö†Ô∏è Dashboard not detected!</strong><br>Please open this page from the dashboard or in the same browser.';
                }
            }, 1000);
        });
    </script>
</body>
</html>
